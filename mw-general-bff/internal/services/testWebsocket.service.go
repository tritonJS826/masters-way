package services

import (
	"context"
	openapiTestWebsocket "mw-general-bff/apiAutogenerated/mw-test-websocket"
)

type TestWebsocketService struct {
	testWebsocketAPI *openapiTestWebsocket.APIClient
}

func newTestWebsocketService(testWebsocketAPI *openapiTestWebsocket.APIClient) *TestWebsocketService {
	return &TestWebsocketService{testWebsocketAPI}
}

type SendUserAnswerHandledByServerEventParams struct {
	SessionUuid         string
	IsOk                bool
	UserAnswer          string
	QuestionName        string
	QuestionDescription string
	QuestionAnswer      string
	ResultDescription   string
	Uuid                string
	UserUuid            string
	QuestionUuid        string
}

func (ms *TestWebsocketService) SendUserAnswerHandledByServerEvent(ctx context.Context, params *SendUserAnswerHandledByServerEventParams) error {
	args := openapiTestWebsocket.MwTestWebsocketInternalSchemasUserAnswerHandledByServerEventPayload{
		IsOk:                params.IsOk,
		QuestionAnswer:      params.UserAnswer,
		QuestionDescription: params.QuestionDescription,
		QuestionName:        params.QuestionName,
		QuestionUuid:        params.QuestionUuid,
		ResultDescription:   params.ResultDescription,
		ResultUuid:          params.Uuid,
		UserAnswer:          params.UserAnswer,
		UserUuid:            params.UserUuid,
	}

	_, err := ms.testWebsocketAPI.SocketAPI.UserAnswerHandledByServer(ctx, params.SessionUuid).Request(args).Execute()

	return err
}
