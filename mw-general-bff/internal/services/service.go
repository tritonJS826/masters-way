package services

import (
	"mw-general-bff/internal/config"
	"mw-general-bff/internal/openapi"
	pb "mw-general-bff/pkg/grpcAutoGenerated/notification"

	"google.golang.org/grpc"
)

type Service struct {
	AuthService         *AuthService
	GeneralService      *GeneralService
	FileService         *FileService
	NotificationService *NotificationService
}

func NewService(config *config.Config, conn *grpc.ClientConn) *Service {
	var generalApi = openapi.MakeGeneralAPIClient(config)
	var storageApi = openapi.MakeStorageAPIClient(config)

	notificationGRPC := pb.NewNotificationClient(conn)
	enabledNotificationGRPC := pb.NewEnabledNotificationClient(conn)

	return &Service{
		AuthService:         newAuthService(generalApi),
		GeneralService:      NewGeneralService(generalApi),
		FileService:         NewFileService(storageApi),
		NotificationService: NewNotificationService(notificationGRPC, enabledNotificationGRPC),
	}
}
