package services

import (
	"mw-notification-bff/internal/config"
	"mw-notification-bff/internal/openapi"
	pb "mw-notification-bff/pkg/grpcAutoGenerated/notification"

	"google.golang.org/grpc"
)

type Service struct {
	GeneralService      *GeneralService
	NotificationService *NotificationService
}

func NewService(
	config *config.Config,
	conn *grpc.ClientConn,
) *Service {
	notificationBFFApi := openapi.MakeNotificationBFFAPIClient(config)

	notificationGRPC := pb.NewNotificationServiceClient(conn)
	notificationSettingGRPC := pb.NewNotificationSettingServiceClient(conn)

	return &Service{
		GeneralService:      NewGeneralService(notificationBFFApi),
		NotificationService: NewNotificationService(notificationGRPC, notificationSettingGRPC),
	}
}

type PopulatedUser struct {
	UserID   string
	Name     string
	ImageURL string
}
