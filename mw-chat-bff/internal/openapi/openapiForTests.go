package openapi

import (
	openapiChat "mw-chat-bff/apiAutogenerated/chat"
	openapiGeneral "mw-chat-bff/apiAutogenerated/general"
	openapiChatBFF "mw-chat-bff/apiAutogenerated/mw-chat-bff"
	openapiChatWebSocket "mw-chat-bff/apiAutogenerated/mw-chat-websocket"
	openapiStorage "mw-chat-bff/apiAutogenerated/mw-storage"
	"mw-chat-bff/internal/config"
	"net/http"
)

func MakeTestGeneralAPIClient(cfg *config.Config) *openapiGeneral.APIClient {
	generalAPIConfig := &openapiGeneral.Configuration{
		Host:   cfg.TestGeneralAPIHost,
		Scheme: "http",
		Servers: openapiGeneral.ServerConfigurations{
			{
				URL:         cfg.TestGeneralBaseURL,
				Description: "mw-general",
			},
		},
		HTTPClient: &http.Client{
			Transport: &AuthTransport{rt: http.DefaultTransport},
		},
	}
	return openapiGeneral.NewAPIClient(generalAPIConfig)
}

func MakeTestChatAPIClient(cfg *config.Config) *openapiChat.APIClient {
	chatAPIConfig := &openapiChat.Configuration{
		Host:   cfg.TestChatAPIHost,
		Scheme: "http",
		Servers: openapiChat.ServerConfigurations{
			{
				URL:         cfg.TestChatBaseURL,
				Description: "mw-chat",
			},
		},
		HTTPClient: &http.Client{
			Transport: &AuthTransport{rt: http.DefaultTransport},
		},
	}
	return openapiChat.NewAPIClient(chatAPIConfig)
}

func MakeTestMWChatWebSocketAPIClient(cfg *config.Config) *openapiChatWebSocket.APIClient {
	mwChatSocketAPIConfig := &openapiChatWebSocket.Configuration{
		Host:   cfg.TestMWChatWebSocketAPIHost,
		Scheme: "http",
		Servers: openapiChatWebSocket.ServerConfigurations{
			{
				URL:         cfg.TestMWChatWebSocketBaseURL,
				Description: "mw-chat-websocket",
			},
		},
		HTTPClient: &http.Client{
			Transport: &AuthTransport{rt: http.DefaultTransport},
		},
	}
	return openapiChatWebSocket.NewAPIClient(mwChatSocketAPIConfig)
}

func MakeTestChatBFFAPIClient(cfg *config.Config) *openapiChatBFF.APIClient {
	chatBFFAPIConfig := &openapiChatBFF.Configuration{
		Host:   cfg.TestChatBFFAPIHost,
		Scheme: "http",
		Servers: openapiChatBFF.ServerConfigurations{
			{
				URL:         cfg.TestChatBFFBaseURL,
				Description: "mw-chat-bff",
			},
		},
		HTTPClient: &http.Client{
			Transport: &AuthTransport{rt: http.DefaultTransport},
		},
	}
	return openapiChatBFF.NewAPIClient(chatBFFAPIConfig)
}

func MakeTestStorageAPIClient(cfg *config.Config) *openapiStorage.APIClient {
	storageAPIConfig := &openapiStorage.Configuration{
		Host:   cfg.TestStorageAPIHost,
		Scheme: "http",
		Servers: openapiStorage.ServerConfigurations{
			{
				URL:         cfg.TestStorageBaseURL,
				Description: "mw-storage",
			},
		},
		HTTPClient: &http.Client{
			Transport: &AuthTransport{rt: http.DefaultTransport},
		},
	}
	return openapiStorage.NewAPIClient(storageAPIConfig)
}
