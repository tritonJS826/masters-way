package services

import (
	"context"

	"mw-training-bff/pkg/grpcAutogenerated/training"
	pb "mw-training-bff/pkg/grpcAutogenerated/training"
)

type FavoriteUserTrainingService struct {
	favoriteUserTrainingGRPC pb.FavoriteUsersTrainingsServiceClient
}

func NewFavoriteUserTrainingService(
	favoriteUserTrainingGRP pb.FavoriteUsersTrainingsServiceClient,
) *FavoriteUserTrainingService {
	return &FavoriteUserTrainingService{favoriteUserTrainingGRP}
}

type CreateFavoriteUserTrainingParams struct {
	TrainingUuid string
	UserUuid     string
}

func (futs *FavoriteUserTrainingService) CreateFavoriteUserTraining(ctx context.Context, params *CreateFavoriteUserTrainingParams) error {
	createFavoriteUserTrainingRequest := &training.CreateFavoriteUserTrainingRequest{
		TrainingUuid: params.TrainingUuid,
		UserUuid:     params.UserUuid,
	}

	_, err := futs.favoriteUserTrainingGRPC.CreateFavoriteUserTraining(ctx, createFavoriteUserTrainingRequest)

	if err != nil {
		return err
	}

	return nil
}

type DeleteFavoriteUserTrainingParams struct {
	TrainingUuid string
	UserUuid     string
}

func (futs *FavoriteUserTrainingService) DeleteFavoriteUserTraining(ctx context.Context, params *DeleteFavoriteUserTrainingParams) error {
	deleteFavoriteUserTrainingRequest := &training.DeleteFavoriteUserTrainingRequest{
		TrainingUuid: params.TrainingUuid,
		UserUuid:     params.UserUuid,
	}

	_, err := futs.favoriteUserTrainingGRPC.DeleteFavoriteUserTraining(ctx, deleteFavoriteUserTrainingRequest)

	if err != nil {
		return err
	}

	return nil
}
