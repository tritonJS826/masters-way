package services

import (
	"context"

	"mw-training-bff/internal/schemas"
	pb "mw-training-bff/pkg/grpcAutogenerated/training"
)

type SessionService struct {
	sessionGRPC pb.SessionServiceClient
}

func NewSessionService(sessionGRPC pb.SessionServiceClient) *SessionService {
	return &SessionService{sessionGRPC}
}

type CreateSessionParams struct {
	UserUuid string
}

func (s *SessionService) CreateSession(ctx context.Context, params *CreateSessionParams) (*schemas.CreateSessionResult, error) {
	session, err := s.sessionGRPC.CreateSession(ctx, &pb.CreateSessionRequest{
		UserUuid: params.UserUuid,
	})
	if err != nil {
		return nil, err
	}

	return &schemas.CreateSessionResult{
		SessionUUID: session.SessionUuid,
	}, nil
}
