package services

import (
	"context"

	pb "mw-training-bff/pkg/grpcAutogenerated/training"
)

type TrainingStudentService struct {
	trainingStudentGRPC pb.TrainingStudentServiceClient
}

func NewTrainingStudentService(
	trainingStudentGRPC pb.TrainingStudentServiceClient,
) *TrainingStudentService {
	return &TrainingStudentService{trainingStudentGRPC}
}

type CreateTrainingStudentParams struct {
	TrainingUuid string
	StudentUuid  string
}

func (tss *TrainingStudentService) CreateTrainingStudent(ctx context.Context, params *CreateTrainingStudentParams) error {
	_, err := tss.trainingStudentGRPC.CreateTrainingStudent(ctx, &pb.CreateTrainingStudentRequest{
		TrainingUuid: params.TrainingUuid,
		StudentUuid:  params.StudentUuid,
	})
	if err != nil {
		return err
	}

	return nil
}

type DeleteTrainingStudentParams struct {
	TrainingUuid string
	StudentUuid  string
}

func (tts *TrainingStudentService) DeleteTrainingStudentByIds(ctx context.Context, params *DeleteTrainingStudentParams) error {
	_, err := tts.trainingStudentGRPC.DeleteTrainingStudent(ctx, &pb.DeleteTrainingStudentRequest{
		TrainingUuid: params.TrainingUuid,
		StudentUuid:  params.StudentUuid,
	})
	if err != nil {
		return err
	}

	return nil
}
