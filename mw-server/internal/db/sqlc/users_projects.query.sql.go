// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: users_projects.query.sql

package db

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const createUsersProjects = `-- name: CreateUsersProjects :one
INSERT INTO users_projects(
    user_uuid,
    project_uuid
) VALUES (
    $1,
    $2
) RETURNING user_uuid, project_uuid, created_at
`

type CreateUsersProjectsParams struct {
	UserUuid    pgtype.UUID `json:"user_uuid"`
	ProjectUuid pgtype.UUID `json:"project_uuid"`
}

func (q *Queries) CreateUsersProjects(ctx context.Context, arg CreateUsersProjectsParams) (UsersProject, error) {
	row := q.db.QueryRow(ctx, createUsersProjects, arg.UserUuid, arg.ProjectUuid)
	var i UsersProject
	err := row.Scan(&i.UserUuid, &i.ProjectUuid, &i.CreatedAt)
	return i, err
}

const deleteUsersProjects = `-- name: DeleteUsersProjects :exec
DELETE FROM users_projects
WHERE user_uuid = $1 AND project_uuid = $2
`

type DeleteUsersProjectsParams struct {
	UserUuid    pgtype.UUID `json:"user_uuid"`
	ProjectUuid pgtype.UUID `json:"project_uuid"`
}

func (q *Queries) DeleteUsersProjects(ctx context.Context, arg DeleteUsersProjectsParams) error {
	_, err := q.db.Exec(ctx, deleteUsersProjects, arg.UserUuid, arg.ProjectUuid)
	return err
}

const getIsUserProjectOwner = `-- name: GetIsUserProjectOwner :one
SELECT
    EXISTS (
        SELECT 1
        FROM projects
        WHERE projects.uuid = $1 AND projects.owner_uuid = $2
    )
`

type GetIsUserProjectOwnerParams struct {
	ProjectUuid pgtype.UUID `json:"project_uuid"`
	UserUuid    pgtype.UUID `json:"user_uuid"`
}

func (q *Queries) GetIsUserProjectOwner(ctx context.Context, arg GetIsUserProjectOwnerParams) (bool, error) {
	row := q.db.QueryRow(ctx, getIsUserProjectOwner, arg.ProjectUuid, arg.UserUuid)
	var exists bool
	err := row.Scan(&exists)
	return exists, err
}
