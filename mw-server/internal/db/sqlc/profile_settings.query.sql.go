// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.29.0
// source: profile_settings.query.sql

package db

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const getPricingPlanByUserId = `-- name: GetPricingPlanByUserId :one
SELECT pricing_plan
FROM profile_settings
WHERE owner_uuid = $1
`

func (q *Queries) GetPricingPlanByUserId(ctx context.Context, userUuid pgtype.UUID) (PricingPlanType, error) {
	row := q.db.QueryRow(ctx, getPricingPlanByUserId, userUuid)
	var pricing_plan PricingPlanType
	err := row.Scan(&pricing_plan)
	return pricing_plan, err
}

const getProfileSettingUserId = `-- name: GetProfileSettingUserId :one
SELECT 
    uuid,
    pricing_plan,
    coins,
    expiration_date
FROM profile_settings
WHERE owner_uuid = $1
`

type GetProfileSettingUserIdRow struct {
	Uuid           pgtype.UUID      `json:"uuid"`
	PricingPlan    PricingPlanType  `json:"pricing_plan"`
	Coins          int32            `json:"coins"`
	ExpirationDate pgtype.Timestamp `json:"expiration_date"`
}

func (q *Queries) GetProfileSettingUserId(ctx context.Context, userUuid pgtype.UUID) (GetProfileSettingUserIdRow, error) {
	row := q.db.QueryRow(ctx, getProfileSettingUserId, userUuid)
	var i GetProfileSettingUserIdRow
	err := row.Scan(
		&i.Uuid,
		&i.PricingPlan,
		&i.Coins,
		&i.ExpirationDate,
	)
	return i, err
}

const updateProfileSettingByUserId = `-- name: UpdateProfileSettingByUserId :one
UPDATE
    profile_settings
SET
    coins = coalesce($1, coins),
    pricing_plan = coalesce($2, pricing_plan),
    expiration_date = coalesce($3, expiration_date)
WHERE
    owner_uuid = $4
RETURNING 
    uuid,
    pricing_plan,
    coins,
    expiration_date
`

type UpdateProfileSettingByUserIdParams struct {
	Coins          pgtype.Int4         `json:"coins"`
	PricingPlan    NullPricingPlanType `json:"pricing_plan"`
	ExpirationDate pgtype.Timestamp    `json:"expiration_date"`
	UserUuid       pgtype.UUID         `json:"user_uuid"`
}

type UpdateProfileSettingByUserIdRow struct {
	Uuid           pgtype.UUID      `json:"uuid"`
	PricingPlan    PricingPlanType  `json:"pricing_plan"`
	Coins          int32            `json:"coins"`
	ExpirationDate pgtype.Timestamp `json:"expiration_date"`
}

func (q *Queries) UpdateProfileSettingByUserId(ctx context.Context, arg UpdateProfileSettingByUserIdParams) (UpdateProfileSettingByUserIdRow, error) {
	row := q.db.QueryRow(ctx, updateProfileSettingByUserId,
		arg.Coins,
		arg.PricingPlan,
		arg.ExpirationDate,
		arg.UserUuid,
	)
	var i UpdateProfileSettingByUserIdRow
	err := row.Scan(
		&i.Uuid,
		&i.PricingPlan,
		&i.Coins,
		&i.ExpirationDate,
	)
	return i, err
}
