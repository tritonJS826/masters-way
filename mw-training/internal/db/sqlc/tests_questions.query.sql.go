// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.29.0
// source: tests_questions.query.sql

package db

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const addQuestionToTest = `-- name: AddQuestionToTest :one
INSERT INTO tests_questions (
    test_uuid,
    question_uuid
) VALUES (
    $1,
    $2
) RETURNING test_uuid, question_uuid, created_at
`

type AddQuestionToTestParams struct {
	TestUuid     pgtype.UUID `json:"test_uuid"`
	QuestionUuid pgtype.UUID `json:"question_uuid"`
}

func (q *Queries) AddQuestionToTest(ctx context.Context, arg AddQuestionToTestParams) (TestsQuestion, error) {
	row := q.db.QueryRow(ctx, addQuestionToTest, arg.TestUuid, arg.QuestionUuid)
	var i TestsQuestion
	err := row.Scan(&i.TestUuid, &i.QuestionUuid, &i.CreatedAt)
	return i, err
}

const checkQuestionInTest = `-- name: CheckQuestionInTest :one
SELECT
    EXISTS(
        SELECT 1 FROM tests_questions
        WHERE test_uuid = $1 AND question_uuid = $2
    ) AS exists
`

type CheckQuestionInTestParams struct {
	TestUuid     pgtype.UUID `json:"test_uuid"`
	QuestionUuid pgtype.UUID `json:"question_uuid"`
}

func (q *Queries) CheckQuestionInTest(ctx context.Context, arg CheckQuestionInTestParams) (bool, error) {
	row := q.db.QueryRow(ctx, checkQuestionInTest, arg.TestUuid, arg.QuestionUuid)
	var exists bool
	err := row.Scan(&exists)
	return exists, err
}

const countQuestionsInTest = `-- name: CountQuestionsInTest :one
SELECT
    COUNT(*)
FROM
    tests_questions
WHERE
    tests_questions.test_uuid = $1
`

func (q *Queries) CountQuestionsInTest(ctx context.Context, testUuid pgtype.UUID) (int64, error) {
	row := q.db.QueryRow(ctx, countQuestionsInTest, testUuid)
	var count int64
	err := row.Scan(&count)
	return count, err
}

const countTestsWithQuestion = `-- name: CountTestsWithQuestion :one
SELECT
    COUNT(*)
FROM
    tests_questions
WHERE
    tests_questions.question_uuid = $1
`

func (q *Queries) CountTestsWithQuestion(ctx context.Context, questionUuid pgtype.UUID) (int64, error) {
	row := q.db.QueryRow(ctx, countTestsWithQuestion, questionUuid)
	var count int64
	err := row.Scan(&count)
	return count, err
}

const getQuestionTestRelations = `-- name: GetQuestionTestRelations :many
SELECT
    tests_questions.test_uuid,
    tests_questions.question_uuid,
    tests_questions.created_at
FROM
    tests_questions
WHERE
    tests_questions.question_uuid = $1
ORDER BY
    tests_questions.created_at ASC
`

func (q *Queries) GetQuestionTestRelations(ctx context.Context, questionUuid pgtype.UUID) ([]TestsQuestion, error) {
	rows, err := q.db.Query(ctx, getQuestionTestRelations, questionUuid)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []TestsQuestion{}
	for rows.Next() {
		var i TestsQuestion
		if err := rows.Scan(&i.TestUuid, &i.QuestionUuid, &i.CreatedAt); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getTestQuestionsByTestUuid = `-- name: GetTestQuestionsByTestUuid :many
SELECT
    tests_questions.test_uuid,
    tests_questions.question_uuid,
    tests_questions.created_at
FROM
    tests_questions
WHERE
    tests_questions.test_uuid = $1
ORDER BY
    tests_questions.created_at ASC
`

func (q *Queries) GetTestQuestionsByTestUuid(ctx context.Context, testUuid pgtype.UUID) ([]TestsQuestion, error) {
	rows, err := q.db.Query(ctx, getTestQuestionsByTestUuid, testUuid)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []TestsQuestion{}
	for rows.Next() {
		var i TestsQuestion
		if err := rows.Scan(&i.TestUuid, &i.QuestionUuid, &i.CreatedAt); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const removeAllQuestionsFromTest = `-- name: RemoveAllQuestionsFromTest :exec
DELETE FROM tests_questions
WHERE test_uuid = $1
`

func (q *Queries) RemoveAllQuestionsFromTest(ctx context.Context, testUuid pgtype.UUID) error {
	_, err := q.db.Exec(ctx, removeAllQuestionsFromTest, testUuid)
	return err
}

const removeQuestionFromAllTests = `-- name: RemoveQuestionFromAllTests :exec
DELETE FROM tests_questions
WHERE question_uuid = $1
`

func (q *Queries) RemoveQuestionFromAllTests(ctx context.Context, questionUuid pgtype.UUID) error {
	_, err := q.db.Exec(ctx, removeQuestionFromAllTests, questionUuid)
	return err
}

const removeQuestionFromTest = `-- name: RemoveQuestionFromTest :exec
DELETE FROM tests_questions
WHERE test_uuid = $1 AND question_uuid = $2
`

type RemoveQuestionFromTestParams struct {
	TestUuid     pgtype.UUID `json:"test_uuid"`
	QuestionUuid pgtype.UUID `json:"question_uuid"`
}

func (q *Queries) RemoveQuestionFromTest(ctx context.Context, arg RemoveQuestionFromTestParams) error {
	_, err := q.db.Exec(ctx, removeQuestionFromTest, arg.TestUuid, arg.QuestionUuid)
	return err
}
