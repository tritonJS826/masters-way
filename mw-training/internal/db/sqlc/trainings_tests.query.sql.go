// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.29.0
// source: trainings_tests.query.sql

package db

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const createTrainingsTests = `-- name: CreateTrainingsTests :one
INSERT INTO trainings_tests (
    training_uuid,
    test_uuid
) VALUES (
    $1, $2
) RETURNING training_uuid, test_uuid
`

type CreateTrainingsTestsParams struct {
	TrainingUuid pgtype.UUID `json:"training_uuid"`
	TestUuid     pgtype.UUID `json:"test_uuid"`
}

func (q *Queries) CreateTrainingsTests(ctx context.Context, arg CreateTrainingsTestsParams) (TrainingsTest, error) {
	row := q.db.QueryRow(ctx, createTrainingsTests, arg.TrainingUuid, arg.TestUuid)
	var i TrainingsTest
	err := row.Scan(&i.TrainingUuid, &i.TestUuid)
	return i, err
}

const deleteTrainingsTests = `-- name: DeleteTrainingsTests :exec
DELETE FROM trainings_tests
WHERE 
    trainings_tests.training_uuid = $1
    AND trainings_tests.test_uuid = $2
`

type DeleteTrainingsTestsParams struct {
	TrainingUuid pgtype.UUID `json:"training_uuid"`
	TestUuid     pgtype.UUID `json:"test_uuid"`
}

func (q *Queries) DeleteTrainingsTests(ctx context.Context, arg DeleteTrainingsTestsParams) error {
	_, err := q.db.Exec(ctx, deleteTrainingsTests, arg.TrainingUuid, arg.TestUuid)
	return err
}

const getTrainingsTestsByTestId = `-- name: GetTrainingsTestsByTestId :many
SELECT
    trainings_tests.training_uuid,
    trainings_tests.test_uuid,
    tests.name AS test_name,
    tests.description AS test_description,
    tests.is_private AS test_is_private,
    tests.owner_uuid AS test_owner_uuid,
    tests.created_at AS test_created_at,
    tests.updated_at AS test_updated_at
FROM
    trainings_tests
LEFT JOIN
    tests ON tests.uuid = trainings_tests.test_uuid
WHERE
    trainings_tests.test_uuid = $1
`

type GetTrainingsTestsByTestIdRow struct {
	TrainingUuid    pgtype.UUID      `json:"training_uuid"`
	TestUuid        pgtype.UUID      `json:"test_uuid"`
	TestName        pgtype.Text      `json:"test_name"`
	TestDescription pgtype.Text      `json:"test_description"`
	TestIsPrivate   pgtype.Bool      `json:"test_is_private"`
	TestOwnerUuid   pgtype.UUID      `json:"test_owner_uuid"`
	TestCreatedAt   pgtype.Timestamp `json:"test_created_at"`
	TestUpdatedAt   pgtype.Timestamp `json:"test_updated_at"`
}

func (q *Queries) GetTrainingsTestsByTestId(ctx context.Context, testUuid pgtype.UUID) ([]GetTrainingsTestsByTestIdRow, error) {
	rows, err := q.db.Query(ctx, getTrainingsTestsByTestId, testUuid)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []GetTrainingsTestsByTestIdRow{}
	for rows.Next() {
		var i GetTrainingsTestsByTestIdRow
		if err := rows.Scan(
			&i.TrainingUuid,
			&i.TestUuid,
			&i.TestName,
			&i.TestDescription,
			&i.TestIsPrivate,
			&i.TestOwnerUuid,
			&i.TestCreatedAt,
			&i.TestUpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getTrainingsTestsByTrainingId = `-- name: GetTrainingsTestsByTrainingId :many
SELECT
    trainings_tests.training_uuid,
    trainings_tests.test_uuid,
    tests.name AS test_name,
    tests.description AS test_description,
    tests.is_private AS test_is_private,
    tests.owner_uuid AS test_owner_uuid,
    tests.created_at AS test_created_at,
    tests.updated_at AS test_updated_at
FROM
    trainings_tests
LEFT JOIN
    tests ON tests.uuid = trainings_tests.test_uuid
WHERE
    trainings_tests.training_uuid = $1
`

type GetTrainingsTestsByTrainingIdRow struct {
	TrainingUuid    pgtype.UUID      `json:"training_uuid"`
	TestUuid        pgtype.UUID      `json:"test_uuid"`
	TestName        pgtype.Text      `json:"test_name"`
	TestDescription pgtype.Text      `json:"test_description"`
	TestIsPrivate   pgtype.Bool      `json:"test_is_private"`
	TestOwnerUuid   pgtype.UUID      `json:"test_owner_uuid"`
	TestCreatedAt   pgtype.Timestamp `json:"test_created_at"`
	TestUpdatedAt   pgtype.Timestamp `json:"test_updated_at"`
}

func (q *Queries) GetTrainingsTestsByTrainingId(ctx context.Context, trainingUuid pgtype.UUID) ([]GetTrainingsTestsByTrainingIdRow, error) {
	rows, err := q.db.Query(ctx, getTrainingsTestsByTrainingId, trainingUuid)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []GetTrainingsTestsByTrainingIdRow{}
	for rows.Next() {
		var i GetTrainingsTestsByTrainingIdRow
		if err := rows.Scan(
			&i.TrainingUuid,
			&i.TestUuid,
			&i.TestName,
			&i.TestDescription,
			&i.TestIsPrivate,
			&i.TestOwnerUuid,
			&i.TestCreatedAt,
			&i.TestUpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}
