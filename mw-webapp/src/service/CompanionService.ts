import {GetCompanionFeedbackRequest} from "src/apiAutogenerated/general";
import {CompanionCharacter, CompanionFeedbackProps} from "src/model/businessModel/CompanionFeedback";
import {companionService} from "src/service/services";

/**
 * Companion feedback DTO from API
 */
export interface CompanionFeedbackDTO {

  /**
   * Feedback uuid
   */
  uuid: string;

  /**
   * Way uuid
   */
  wayUuid: string;

  /**
   * Feedback status (0-100)
   */
  status: number;

  /**
   * Feedback comment text
   */
  comment: string;

  /**
   * Companion character type
   */
  character: CompanionCharacter;

  /**
   * Last update timestamp
   */
  lastUpdatedAt: string;
}

/**
 * Companion service (for AI feedback on way progress)
 */
export class CompanionService {

  /**
   * Get companion feedback for a way
   * @param requestParameters - Request params with wayId
   * @returns Companion feedback props
   */
  public static async getCompanionFeedback(
    requestParameters: GetCompanionFeedbackRequest,
  ): Promise<CompanionFeedbackProps> {
    const feedback = await companionService.getCompanionFeedback(requestParameters);

    return {
      status: feedback.status,
      comment: feedback.comment,
      character: feedback.character as CompanionCharacter,
      lastUpdatedAt: feedback.lastUpdatedAt,
    };
  }

}
