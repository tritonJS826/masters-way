import {DeleteUserContactRequest, UpdateUserContactRequest} from "src/apiAutogenerated/general";
import {Contact} from "src/model/businessModel/User";
import {ContactService} from "src/service/ContactService";

/**
 * Params for{@link ContactDAL.createContact}
 */
interface CreateUserContactParams {

  /**
   * Contact name
   */
  contactLink: string;

  /**
   * Contact value
   */
  description?: string;

  /**
   * Owner uuid
   */
  ownerUuid: string;
}

/**
 * Provides methods to interact with the contacts
 */
export class ContactDAL {

  /**
   * Create contact
   */
  public static async createContact(params: CreateUserContactParams): Promise<Contact> {
    const contactDTO = await ContactService.createContact({
      userId: params.ownerUuid,
      request: {
        contactLink: params.contactLink,
        description: params.description,
      },
    });
    const contact = new Contact({...contactDTO});

    return contact;

  }

  /**
   * Update contact
   */
  public static async updateContact(params: UpdateUserContactRequest): Promise<Contact> {
    const contactDTO = await ContactService.updateContact(params);
    const contact = new Contact({...contactDTO});

    return contact;
  }

  /**
   * Delete contact by UUID
   */
  public static async deleteContact(params: DeleteUserContactRequest): Promise<void> {
    await ContactService.deleteContact(params);
  }

}
