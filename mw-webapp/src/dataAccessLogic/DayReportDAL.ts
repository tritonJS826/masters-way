import {dayReportDTOToDayReport} from "src/dataAccessLogic/DTOToPreviewConverter/dayReportDTOToDayReport";
import {DayReport} from "src/model/businessModel/DayReport";
import {DayReportService} from "src/service/DayReportService";

/**
 * Create DayReport params
 */
export interface CreateDayReportParams {

  /**
   * Way's UUID
   */
  wayUuid: string;

  /**
   * Way's name
   */
  wayName: string;

}

/**
 * Provides methods to interact with the DayReport business model
 */
export class DayReportDAL {

  /**
   * Create DayReport with empty fields and autogenerated uuid
   */
  public static async createDayReport(params: CreateDayReportParams): Promise<DayReport> {
    const dayReportDTO = await DayReportService.createDayReport({
      request: {
        isDayOff: false,
        wayUuid: params.wayUuid,
      },
    });

    const dayReport = dayReportDTOToDayReport({
      dayReportDTO,
      wayName: params.wayName,
      wayUuid: params.wayUuid,
    });

    return dayReport;
  }

  /**
   * Update DayReport
   */
  public static async updateDayReport(dayReport: DayReport) {
    await DayReportService.updateDayReport({
      dayReportId: dayReport.uuid,
      request: {isDayOff: dayReport.isDayOff},
    });
  }

}
