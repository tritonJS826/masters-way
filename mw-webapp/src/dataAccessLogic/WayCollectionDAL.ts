import {SchemasWayCollectionPlainResponse} from "src/apiAutogenerated";
import {WayCollection} from "src/model/businessModel/User";
import {WayCollectionService} from "src/service/WayCollectionService";

/**
 * Provides methods to interact with the WayCollection model
 */
export class WayCollectionDAL {

  /**
   * Create wayCollection
   */
  public static async createWayCollection(ownerUuid: string): Promise<WayCollection> {
    const wayCollectionDTO: SchemasWayCollectionPlainResponse = await WayCollectionService.createWayCollection({
      request: {
        name: "New collection",
        ownerUuid,
      },
    });

    const wayCollection = new WayCollection({
      uuid: wayCollectionDTO.uuid,
      name: wayCollectionDTO.name,
      createdAt: new Date(),
      updatedAt: new Date(),
      ownerUuid,
      ways: [],
    });

    return wayCollection;
  }

  /**
   * Update wayCollection
   */
  public static async updateWayCollection(wayCollectionId: string, ownerUuid: string, name: string): Promise<WayCollection> {
    const updatedWayCollectionDTO = await WayCollectionService.updateWayCollection({
      wayCollectionId,
      request: {name},
    });

    const updatedWayCollection = new WayCollection({
      createdAt: new Date(),
      name: updatedWayCollectionDTO.name,
      ownerUuid,
      updatedAt: new Date(),
      uuid: updatedWayCollectionDTO.uuid,
      ways: [],
    });

    return updatedWayCollection;
  }

  /**
   * Delete wayCollection
   */
  public static async deleteWayCollection(wayCollectionId: string): Promise<void> {
    await WayCollectionService.deleteWayCollection({wayCollectionId});
  }

}
