import {SchemasWayPlainResponse} from "src/apiAutogenerated";
import {getWayStatus} from "src/logic/waysTable/wayStatus";
import {WayPreview} from "src/model/businessModelPreview/WayPreview";
import {Language} from "src/utils/LanguageWorker";

/**
 * Convert {@link SchemasWayPlainResponse} to {@link WayPreview}
 */
export const wayDTOToWayPreview = (wayDTO: SchemasWayPlainResponse): WayPreview => {
  const status = getWayStatus({
    status: wayDTO.isCompleted ? "Completed" : null,
    lastUpdate: new Date(wayDTO.updatedAt),
    language: Language.ENGLISH,
  });

  return new WayPreview({
    ...wayDTO,
    status,
    createdAt: new Date(wayDTO.createdAt),
    lastUpdate: new Date(wayDTO.updatedAt),
  });
};
