import {MwGeneralBffInternalSchemasCurrentUserResponse} from "src/apiAutogenerated/general";
import {contactDTOToContact} from "src/dataAccessLogic/DTOToPreviewConverter/ContactDTOtoContact";
import {defaultWayCollectionsDTOToDefaultWayCollections}
  from "src/dataAccessLogic/DTOToPreviewConverter/defaultWayCollectionsDTOToDefaultWayCollections";
import {profileSettingsDTOToProfileSettings} from "src/dataAccessLogic/DTOToPreviewConverter/profileSettingsDTOtoProfileSettings";
import {projectPlainDTOToProjectPreview} from "src/dataAccessLogic/DTOToPreviewConverter/projectPlainDTOToProjectPreview";
import {userPlainDTOToUserPlainConverter} from "src/dataAccessLogic/DTOToPreviewConverter/userPlainDTOToUserPlain";
import {wayCollectionDTOToWayCollection} from "src/dataAccessLogic/DTOToPreviewConverter/wayCollectionDTOToWayCollection";
import {wayDTOToWayPreview} from "src/dataAccessLogic/DTOToPreviewConverter/wayDTOToWayPreview";
import {CurrentUser} from "src/model/businessModel/CurrentUser";

/**
 * Convert {@link currentUserDTO} to {@link CurrentUser}
 */
export const currentUserDTOToCurrentUserConverter = (
  currentUserDTO: MwGeneralBffInternalSchemasCurrentUserResponse,
): CurrentUser => {
  return new CurrentUser({
    ...currentUserDTO,
    customWayCollections: currentUserDTO.customWayCollections.map(wayCollectionDTOToWayCollection),
    defaultWayCollections: defaultWayCollectionsDTOToDefaultWayCollections(currentUserDTO.defaultWayCollections),
    createdAt: new Date(currentUserDTO.createdAt),
    favoriteUsers: currentUserDTO.favoriteUsers.map(userPlainDTOToUserPlainConverter),
    favoriteForUserUuids: currentUserDTO.favoriteForUsers,
    imageUrl: currentUserDTO.imageUrl ?? "",
    wayRequests: currentUserDTO.wayRequests.map(wayDTOToWayPreview),
    projects: currentUserDTO.projects.map(projectPlainDTOToProjectPreview),
    skills: currentUserDTO.tags,
    contacts: currentUserDTO.userContacts.map(contactDTOToContact),
    profileSetting: profileSettingsDTOToProfileSettings(currentUserDTO.profileSetting),
  });
};
