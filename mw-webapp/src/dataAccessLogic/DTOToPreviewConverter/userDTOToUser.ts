import {MwServerInternalSchemasUserPopulatedResponse} from "src/apiAutogenerated/general";
import {defaultWayCollectionsDTOToDefaultWayCollections}
  from "src/dataAccessLogic/DTOToPreviewConverter/defaultWayCollectionsDTOToDefaultWayCollections";
import {projectPlainDTOToProjectPreview} from "src/dataAccessLogic/DTOToPreviewConverter/projectPlainDTOToProjectPreview";
import {userPlainDTOToUserPlainConverter} from "src/dataAccessLogic/DTOToPreviewConverter/userPlainDTOToUserPlain";
import {wayCollectionDTOToWayCollection} from "src/dataAccessLogic/DTOToPreviewConverter/wayCollectionDTOToWayCollection";
import {wayDTOToWayPreview} from "src/dataAccessLogic/DTOToPreviewConverter/wayDTOToWayPreview";
import {User} from "src/model/businessModel/User";

/**
 * Convert {@link UserDTO} to {@link User}
 */
export const userDTOToUserConverter = (userDTO: MwServerInternalSchemasUserPopulatedResponse): User => {
  return new User({
    ...userDTO,
    customWayCollections: userDTO.customWayCollections.map(wayCollectionDTOToWayCollection),
    defaultWayCollections: defaultWayCollectionsDTOToDefaultWayCollections(userDTO.defaultWayCollections),
    createdAt: new Date(userDTO.createdAt),
    favoriteUsers: userDTO.favoriteUsers.map(userPlainDTOToUserPlainConverter),
    favoriteForUserUuids: userDTO.favoriteForUsers,
    imageUrl: userDTO.imageUrl ?? "",
    wayRequests: userDTO.wayRequests.map(wayDTOToWayPreview),
    projects: userDTO.projects.map(projectPlainDTOToProjectPreview),
    skills: userDTO.tags,
  });
};
