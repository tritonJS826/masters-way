import {MwTrainingBffInternalSchemasTopic} from "src/apiAutogenerated/training";
import {Topic} from "src/model/businessModel/Topic";

/**
 * Map tree topics
 */
export const mapTreeTopics = (topicA: MwServerInternalSchemasMetricTreeNode): Topic => {

  const mappedTopic = new Topic({
    children: topicA.children.map(mapTreeTopics),
    name: topicA.metric.description,
    parentUuid: topicA.metric.parentUuid,
    uuid: topicA.metric.uuid,
    order,
    createdAt,
    owner,
    practiceMaterialAmount,
    theoryMaterialAmount,
    trainingUuid,
  });

  if (topicA.children && topicA.children.length > 0) {
    mappedTopic.children = topicA.children.map(mapTreeTopics); // Recursively map children
  }

  return mappedTopic;
};

/**
 * Convert {@link topicDTO} to {@link Topic}
 */
export const topicDTOToTopic = (
  topicDTO: MwTrainingBffInternalSchemasTopic,
): Topic => {
  return new Topic({
    ...topicDTO,
    createdAt: new Date(topicDTO.createdAt),
    children: topicDTO.topic.map(mapTreeTopics),
  });
};
