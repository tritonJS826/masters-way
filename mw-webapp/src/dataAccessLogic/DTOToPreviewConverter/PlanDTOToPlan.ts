import {SchemasPlanPopulatedResponse} from "src/apiAutogenerated/general";
import {Label} from "src/model/businessModel/Label";
import {Plan} from "src/model/businessModel/Plan";

/**
 * Plan converter params
 */
interface PlanConverterParams {

  /**
   * Plan DTO
   */
  planDTO: SchemasPlanPopulatedResponse;

  /**
   * Job's way name
   */
  wayName: string;

  /**
   *Job's way uuid
   */
  wayUuid: string;
}

/**
 * Convert {@link PlanDTO} to {@link Plan}
 */
export const PlanDTOToPlan = (params: PlanConverterParams): Plan => {
  return new Plan({
    ...params.planDTO,
    createdAt: new Date(params.planDTO.createdAt),
    updatedAt: new Date(params.planDTO.updatedAt),
    wayName: params.wayName,
    wayUuid: params.wayUuid,
    tags: params.planDTO.tags.map(label => new Label(label)),
  });
};
