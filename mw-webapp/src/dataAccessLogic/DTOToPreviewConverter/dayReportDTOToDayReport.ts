import {SchemasDayReportPopulatedResponse} from "src/apiAutogenerated";
import {Comment} from "src/model/businessModel/Comment";
import {DayReport} from "src/model/businessModel/DayReport";
import {JobDone} from "src/model/businessModel/JobDone";
import {Plan} from "src/model/businessModel/Plan";
import {Problem} from "src/model/businessModel/Problem";

/**
 * Convert {@link DayReportDTO} to {@link DayReport}
 */
export const DayReportDTOToDayReport = (dayReportDTO: SchemasDayReportPopulatedResponse): DayReport => {
  const plans = dayReportDTO.plans.map((plan) => {

    return new Plan({
      ...plan,
      updatedAt: new Date(plan.updatedAt),
      createdAt: new Date(plan.createdAt),
    });
  });

  const problems = dayReportDTO.problems.map((problem) => {

    return new Problem({
      ...problem,
      updatedAt: new Date(problem.updatedAt),
      createdAt: new Date(problem.createdAt),
    });
  });

  const comments = dayReportDTO.comments.map((commentDTO) => {
    return new Comment({
      ...commentDTO,
      createdAt: new Date(commentDTO.createdAt),
      updatedAt: new Date(commentDTO.updatedAt),
    });
  });

  const jobsDone = dayReportDTO.jobsDone.map((jobDoneDTO) => {
    return new JobDone({
      ...jobDoneDTO,
      createdAt: new Date(jobDoneDTO.createdAt),
      updatedAt: new Date(jobDoneDTO.updatedAt),
    });
  });

  return new DayReport({
    ...dayReportDTO,
    createdAt: new Date(dayReportDTO.createdAt),
    updatedAt: new Date(dayReportDTO.updatedAt),
    jobsDone,
    plans,
    problems,
    comments,
  });
};
